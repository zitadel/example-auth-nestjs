<main
  class='grid flex-1 place-items-center bg-white px-6 py-24 sm:py-32 lg:px-8'
>
  <div class='w-full max-w-md text-center'>
    <div
      class='mx-auto mb-6 flex h-16 w-16 items-center justify-center rounded-full bg-blue-100'
    >
      <!--suppress HtmlDeprecatedAttribute -->
      <svg
        class='h-8 w-8 text-blue-600'
        fill='none'
        viewBox='0 0 24 24'
        stroke-width='1.5'
        stroke='currentColor'
      >
        <path
          stroke-linecap='round'
          stroke-linejoin='round'
          d='M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z'
        />
      </svg>
    </div>
    <h1
      class='text-5xl font-semibold tracking-tight text-balance text-gray-900 sm:text-7xl'
    >
      Sign in
    </h1>
    {{#if message}}
      <p class='mt-6 text-lg font-medium text-pretty sm:text-xl/8 text-red-600'>
        {{message.message}}
      </p>
    {{else}}
      <p
        class='mt-6 text-lg font-medium text-pretty sm:text-xl/8 text-gray-500'
      >
        Continue to your account
      </p>
    {{/if}}
    {{#each providers as |provider|}}
      <div class='mt-10'>
        <form
          id='signinForm'
          action='{{provider.signinUrl}}'
          method='POST'
          class='space-y-4'
        >
          <input type='hidden' name='callbackUrl' value='{{callbackUrl}}' />
          <button
            id='signinButton'
            type='submit'
            class='flex w-full items-center justify-center gap-3 rounded-lg bg-blue-600 px-4 py-3 font-semibold text-white transition duration-200 hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed'
          >
            <!--suppress HtmlDeprecatedAttribute -->
            <svg class='h-5 w-5' fill='currentColor' viewBox='0 0 24 24'>
              <path
                fill-rule='evenodd'
                d='M8 10V7a4 4 0 1 1 8 0v3h1a2 2 0 0 1 2 2v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h1Zm2-3a2 2 0 1 1 4 0v3h-4V7Zm2 6a1 1 0 0 1 1 1v3a1 1 0 1 1-2 0v-3a1 1 0 0 1 1-1Z'
                clip-rule='evenodd'
              />
            </svg>
            <span id='signinText'>Sign in with {{provider.name}}</span>
          </button>
        </form>
      </div>
    {{/each}}

    <div class='mt-8'>
      <a
        href='/'
        class='inline-flex items-center text-sm text-gray-500 hover:text-gray-700'
      >
        <!--suppress HtmlDeprecatedAttribute -->
        <svg
          class='mr-2 h-4 w-4'
          fill='none'
          viewBox='0 0 24 24'
          stroke-width='1.5'
          stroke='currentColor'
        >
          <path
            stroke-linecap='round'
            stroke-linejoin='round'
            d='M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18'
          />
        </svg>
        Back to home
      </a>
    </div>
  </div>
</main>

{{! prettier-ignore }}
<script type="text/javascript">
	document.addEventListener('DOMContentLoaded', function () {
		const form = document.getElementById('signinForm')
		const button = document.getElementById('signinButton')
		const buttonText = document.getElementById('signinText')
		if (form && button && buttonText) {
			const originalText = buttonText.textContent
			form.addEventListener('submit', async function (e) {
				e.preventDefault()
				button.disabled = true
				buttonText.textContent = 'Signing inâ€¦'
				try {
					const { csrfToken } = await fetch('/auth/csrf').then((r) => r.json())
					const input = Object.assign(
						document.createElement('input'),
						{ type: 'hidden', name: 'csrfToken', value: csrfToken }
					)
					form.appendChild(input)
					form.submit()
				} catch {
					alert('Sign-in failed. Please try again.')
					button.disabled = false
					buttonText.textContent = originalText
				}
			})
		}
	})
</script>
{{! prettier-ignore }}